# ğŸ” WireGuard é…ç½®ç”Ÿæˆå™¨

ä¸€ä¸ªåŸºäº Tauri 2 + React 19 æ„å»ºçš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆ WireGuard å®¢æˆ·ç«¯é…ç½®ï¼Œæ”¯æŒçˆ±å¿«ï¼ˆiKuaiï¼‰å’Œ OpenWrt ç­‰è·¯ç”±å™¨ç³»ç»Ÿã€‚

![åº”ç”¨ç•Œé¢é¢„è§ˆ](./screens/1.png)

## âœ¨ ç‰¹æ€§

- ğŸ“¦ **è·¨å¹³å°æ¡Œé¢åº”ç”¨** - åŸºäº Tauri 2ï¼Œæ”¯æŒ macOSã€Windowsã€Linux
- ğŸ”‘ **å¯†é’¥ç®¡ç†** - ä¸€é”®ç”Ÿæˆ WireGuard å¯†é’¥å¯¹å’Œé¢„å…±äº«å¯†é’¥ï¼ˆPSKï¼‰
- ğŸ“„ **é…ç½®ç”Ÿæˆ** - åŒæ—¶ç”Ÿæˆæ ‡å‡† WireGuard é…ç½®å’Œè·¯ç”±å™¨ Peer é…ç½®
- ğŸŒ **å¤šè·¯ç”±å™¨æ”¯æŒ** - æ”¯æŒçˆ±å¿«è·¯ç”±å™¨ï¼ˆå¯ç›´æ¥å¯¼å…¥ Peerï¼‰å’Œ OpenWrtï¼ˆæä¾›å‚è€ƒé…ç½®ï¼‰
- ğŸ“± **äºŒç»´ç å¯¼å…¥** - è‡ªåŠ¨ç”Ÿæˆé…ç½®äºŒç»´ç ï¼Œæ”¯æŒç§»åŠ¨è®¾å¤‡å¿«é€Ÿå¯¼å…¥
- ğŸ’¾ **é…ç½®æŒä¹…åŒ–** - è‡ªåŠ¨ä¿å­˜å¯¹ç«¯é…ç½®ï¼Œä¸‹æ¬¡æ— éœ€é‡å¤è¾“å…¥
- ğŸ“œ **å†å²è®°å½•** - ä¿å­˜æ‰€æœ‰ç”Ÿæˆçš„é…ç½®ï¼Œæ”¯æŒæŸ¥çœ‹ã€å¯¼å‡ºã€åˆ é™¤
- ğŸ“¦ **æ‰¹é‡å¯¼å‡º** - æ”¯æŒå¯¼å‡ºå•ä¸ªé…ç½®æˆ–å°†æ‰€æœ‰é…ç½®æ‰“åŒ…ä¸º ZIP
- ğŸ¨ **å‹å¥½ç•Œé¢** - åˆ†æ­¥éª¤å‘å¯¼å¼æ“ä½œï¼Œæ¸…æ™°ç›´è§‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React 19.1.0 + Vite 7.0.4
- **æ¡Œé¢æ¡†æ¶**: Tauri 2
- **åç«¯**: Rust (Tauri åç«¯)
- **åŒ…ç®¡ç†å™¨**: Yarn

## ğŸ“¦ å®‰è£…

### ä¸‹è½½å®‰è£…åŒ…

ä» [Releases](https://github.com/mrtian2016/wireguard-config-generator/releases) é¡µé¢ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…ã€‚

#### âš ï¸ macOS ç”¨æˆ·æ³¨æ„äº‹é¡¹

é¦–æ¬¡æ‰“å¼€åº”ç”¨æ—¶,macOS ç³»ç»Ÿå¯èƒ½ä¼šæç¤º **"WireGuard Config Generator.app"å·²æŸå,æ— æ³•æ‰“å¼€ã€‚ä½ åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“ã€‚**

è¿™æ˜¯å› ä¸ºåº”ç”¨æœªç»è¿‡ Apple éªŒè¯ã€‚è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è§£å†³:

1. æ‰“å¼€"ç»ˆç«¯"åº”ç”¨
2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤(æ ¹æ®åº”ç”¨çš„å®é™…å®‰è£…ä½ç½®è°ƒæ•´è·¯å¾„):

```bash
# å¦‚æœå®‰è£…åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹
sudo xattr -r -d com.apple.quarantine /Applications/WireGuard\ Config\ Generator.app

# æˆ–è€…å¦‚æœåœ¨å…¶ä»–ä½ç½®,æ›¿æ¢ä¸ºå®é™…è·¯å¾„
sudo xattr -r -d com.apple.quarantine /path/to/WireGuard\ Config\ Generator.app
```

3. è¾“å…¥ç³»ç»Ÿå¯†ç å,åº”ç”¨å³å¯æ­£å¸¸æ‰“å¼€

> ğŸ’¡ **è¿™æ˜¯ä»€ä¹ˆæ“ä½œ?**
> `xattr` å‘½ä»¤ç”¨äºç§»é™¤ macOS çš„éš”ç¦»å±æ€§(quarantine)æ ‡è®°ã€‚è¿™ä¸ªæ ‡è®°ä¼šé˜»æ­¢ä»äº’è”ç½‘ä¸‹è½½çš„æœªç­¾ååº”ç”¨è¿è¡Œã€‚æ­¤æ“ä½œä»…ç§»é™¤é™åˆ¶,ä¸ä¼šä¿®æ”¹åº”ç”¨æœ¬èº«ã€‚

### ä»æºç æ„å»º

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/mrtian2016/wireguard-config-generator.git
cd wireguard-config-generator
```

2. **å®‰è£…ä¾èµ–**
```bash
yarn install
```

3. **å¼€å‘æ¨¡å¼è¿è¡Œ**
```bash
yarn tauri dev
```

4. **æ„å»ºåº”ç”¨**
```bash
yarn tauri build
```

æ„å»ºäº§ç‰©ä½äº `src-tauri/target/release/bundle/`

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ­¥éª¤ 1: æœ¬åœ°æ¥å£é…ç½®

1. è¾“å…¥é…ç½®æ–‡ä»¶åç§°ï¼ˆé»˜è®¤ `wg0`ï¼‰
2. ç”Ÿæˆæˆ–è¾“å…¥æœ¬åœ°ç§é’¥
3. è¾“å…¥æœ¬åœ°æ¥å£ IP åœ°å€ï¼ˆCIDR æ ¼å¼ï¼Œä¾‹å¦‚ `192.168.199.10/32`ï¼‰
4. å¯é€‰ï¼šè®¾ç½®ç›‘å¬ç«¯å£å’Œ DNS æœåŠ¡å™¨

### æ­¥éª¤ 2: å¯¹ç«¯é…ç½®ï¼ˆè·¯ç”±å™¨æœåŠ¡ç«¯ï¼‰

1. è¾“å…¥è·¯ç”±å™¨æœåŠ¡ç«¯å…¬é’¥ï¼ˆä»è·¯ç”±å™¨ç®¡ç†ç•Œé¢è·å–ï¼‰
2. è¾“å…¥ Endpoint åœ°å€ï¼ˆæœåŠ¡å™¨å…¬ç½‘ IP æˆ–åŸŸå + ç«¯å£ï¼‰
3. å¯é€‰ï¼šç”Ÿæˆé¢„å…±äº«å¯†é’¥ï¼ˆPSKï¼‰ä»¥å¢å¼ºå®‰å…¨æ€§
4. è®¾ç½® AllowedIPsï¼ˆ`0.0.0.0/0` ä¸ºå…¨å±€ VPNï¼‰
5. è®¾ç½® PersistentKeepaliveï¼ˆæ¨è 25 ç§’ï¼‰

> ğŸ’¡ æ­¤æ­¥éª¤çš„é…ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡æ— éœ€é‡å¤è¾“å…¥

### æ­¥éª¤ 3: è·¯ç”±å™¨ Peer é…ç½®

1. Peer ID ä¼šè‡ªåŠ¨é€’å¢
2. è¾“å…¥è·¯ç”±å™¨æ¥å£åç§°ï¼ˆé»˜è®¤ `wg_0`ï¼‰
3. è¾“å…¥å¤‡æ³¨åç§°ï¼ˆä¾‹å¦‚ï¼šiPhoneã€MacBookï¼‰

### æ­¥éª¤ 4: ç”Ÿæˆå®Œæˆ

- **WireGuard é…ç½®æ–‡ä»¶** - å¯ä¿å­˜ä¸º `.conf` æ–‡ä»¶æˆ–æ‰«ç å¯¼å…¥
- **è·¯ç”±å™¨ Peer é…ç½®** - å¯ä¿å­˜ä¸º `.txt` æ–‡ä»¶
  - **çˆ±å¿«è·¯ç”±å™¨**ï¼šå¯ç›´æ¥åœ¨ Peer ç®¡ç†ç•Œé¢å¯¼å…¥
  - **OpenWrt**ï¼šéœ€æ‰‹åŠ¨æ·»åŠ  Peerï¼ˆå‚è€ƒé…ç½®ä¸­çš„å‚æ•°ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/                    # React å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.jsx           # React å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ ConfirmDialog.jsx  # ç¡®è®¤å¯¹è¯æ¡†ç»„ä»¶
â”‚   â””â”€â”€ App.css            # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ src-tauri/             # Tauri Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib.rs         # ä¸»åº“æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰ Tauri å‘½ä»¤
â”‚   â”‚   â””â”€â”€ main.rs        # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ Cargo.toml         # Rust ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json    # Tauri é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ capabilities/      # Tauri æƒé™é…ç½®
â”œâ”€â”€ screens/               # æˆªå›¾èµ„æº
â”œâ”€â”€ index.html             # HTML å…¥å£
â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â””â”€â”€ package.json           # Node.js ä¾èµ–é…ç½®
```


## ğŸ”§ å¼€å‘å‘½ä»¤

### å‰ç«¯å¼€å‘
```bash
# å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨ï¼ˆä»…å‰ç«¯ï¼‰
yarn dev

# æ„å»ºå‰ç«¯
yarn build

# é¢„è§ˆæ„å»ºç»“æœ
yarn preview
```

### Tauri å¼€å‘
```bash
# å¯åŠ¨ Tauri å¼€å‘æ¨¡å¼ï¼ˆåŒ…å«çƒ­é‡è½½ï¼‰
yarn tauri dev

# æ„å»º Tauri åº”ç”¨
yarn tauri build
```

### Rust åç«¯å¼€å‘
```bash
cd src-tauri

# æ£€æŸ¥ Rust ä»£ç 
cargo check

# è¿è¡Œ Rust æµ‹è¯•
cargo test

# æ ¼å¼åŒ– Rust ä»£ç 
cargo fmt

# è¿è¡Œ Clippy æ£€æŸ¥
cargo clippy
```

## ğŸ“ åŠŸèƒ½è¯´æ˜

### å¯†é’¥ç”Ÿæˆ

- **WireGuard å¯†é’¥å¯¹**ï¼šåŸºäº X25519 ç®—æ³•ç”Ÿæˆç§é’¥å’Œå…¬é’¥
- **é¢„å…±äº«å¯†é’¥ï¼ˆPSKï¼‰**ï¼šé¢å¤–çš„å®‰å…¨å±‚ï¼Œæ¨èå¯ç”¨
- **è‡ªåŠ¨å…¬é’¥è®¡ç®—**ï¼šè¾“å…¥ç§é’¥æ—¶è‡ªåŠ¨è®¡ç®—å…¬é’¥

### é…ç½®æŒä¹…åŒ–

åº”ç”¨ä½¿ç”¨ Tauri çš„åº”ç”¨æ•°æ®ç›®å½•å­˜å‚¨é…ç½®ï¼š

- **macOS**: `~/Library/Application Support/com.wireguard.config-generator/`
- **Windows**: `%APPDATA%\com.wireguard.config-generator\`
- **Linux**: `~/.local/share/com.wireguard.config-generator/`

å­˜å‚¨å†…å®¹ï¼š
- `config.json` - å¯¹ç«¯é…ç½®ã€çˆ±å¿«é…ç½®ã€Peer ID è®¡æ•°å™¨
- `history/` - æ‰€æœ‰ç”Ÿæˆçš„å†å²é…ç½®è®°å½•

### å†å²è®°å½•

- è‡ªåŠ¨ä¿å­˜æ¯æ¬¡ç”Ÿæˆçš„é…ç½®
- æ”¯æŒæŸ¥çœ‹ã€å¯¼å‡ºã€åˆ é™¤å•æ¡è®°å½•
- æ”¯æŒå¯¼å‡ºæ‰€æœ‰é…ç½®ä¸º ZIP å‹ç¼©åŒ…
- æ”¯æŒå¯¼å‡ºæ‰€æœ‰ Peer é…ç½®ä¸ºå•ä¸ªæ–‡æœ¬æ–‡ä»¶
- æ”¯æŒæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬é…ç½®å’Œå†å²è®°å½•ï¼‰

### é…ç½®æ ¼å¼

#### æ ‡å‡† WireGuard é…ç½®ï¼ˆ.confï¼‰
```ini
[Interface]
PrivateKey = xxx
Address = 192.168.199.10/32
ListenPort = 51820
DNS = 8.8.8.8

[Peer]
PublicKey = xxx
PresharedKey = xxx
Endpoint = example.com:51820
AllowedIPs = 0.0.0.0/0, ::/0
PersistentKeepalive = 25
```

#### è·¯ç”±å™¨ Peer é…ç½®ï¼ˆ.txtï¼‰
```
id=1 enabled=yes comment=iPhone interface=wg_0 peer_publickey=xxx presharedkey=xxx allowips=192.168.199.10/32 endpoint= endpoint_port= keepalive=25
```
> æ³¨ï¼šæ­¤æ ¼å¼é€‚ç”¨äºçˆ±å¿«è·¯ç”±å™¨ç›´æ¥å¯¼å…¥ã€‚OpenWrt ç”¨æˆ·è¯·å‚è€ƒé…ç½®å‚æ•°æ‰‹åŠ¨æ·»åŠ  Peerã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [WireGuard](https://www.wireguard.com/) - ç°ä»£ VPN åè®®
- [Tauri](https://tauri.app/) - è½»é‡çº§æ¡Œé¢åº”ç”¨æ¡†æ¶
- [React](https://react.dev/) - UI æ¡†æ¶
- [çˆ±å¿«è·¯ç”±å™¨](https://www.ikuai8.com/) - ä¼ä¸šçº§è·¯ç”±ç³»ç»Ÿ
- [OpenWrt](https://openwrt.org/) - å¼€æºè·¯ç”±å™¨å›ºä»¶

---

**WireGuard Client Config Generator**
